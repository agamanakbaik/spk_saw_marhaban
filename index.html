<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPK SAW - Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Efek sidebar */
        
        #sidebar-wrapper {
            transition: margin-left 0.3s ease-in-out;
            width: 15rem;
            min-height: 100vh;
        }
        
        #wrapper.toggled #sidebar-wrapper {
            margin-left: -15rem;
        }
        /* Desktop default */
        
        @media (min-width: 768px) {
            #sidebar-wrapper {
                margin-left: 0;
            }
            #wrapper.toggled #sidebar-wrapper {
                margin-left: -15rem;
            }
        }
        
        /* CSS untuk tombol download yang sedang loading */
        
        button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        button:disabled .spinner {
            display: inline-block;
            width: 1.25rem;
            height: 1.25rem;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body class="bg-gray-100 font-sans">
    <div class="flex" id="wrapper">
        <div class="bg-gray-800 border-r border-gray-700 md:relative fixed z-30" id="sidebar-wrapper">
            <div class="sidebar-heading text-white p-4 text-xl font-bold border-b border-gray-700">
                SPK SAW
            </div>

            <nav class="flex flex-col p-2">
                <p class="text-gray-400 px-2 pt-4 pb-1 text-xs font-semibold uppercase">
                    SUPER ADMIN
                </p>
                <a href="#" id="menu-manajemen-admin" class="p-3 text-white hover:bg-gray-700 rounded-md transition duration-150" onclick="loadContent('manajemen-admin')">
            Manajemen Admin
          </a>
                <a href="#" id="menu-backup-db" class="p-3 text-white hover:bg-gray-700 rounded-md transition duration-150 flex items-center" onclick="loadContent('backup-db')">
                    <i class="bi bi-database-down mr-2 text-gray-400"></i>
                    Backup Database
                </a>
                <p class="text-gray-400 px-2 pt-4 pb-1 text-xs font-semibold uppercase">
                    ADMIN PANEL
                </p>
                <a href="#" class="p-3 text-white hover:bg-gray-700 rounded-md transition duration-150" onclick="loadContent('dashboard')">
            Dashboard
          </a>
                <a href="#" class="p-3 text-white hover:bg-gray-700 rounded-md transition duration-150" onclick="loadContent('alternatif')">
            Data Alternatif
          </a>
                <a href="#" class="p-3 text-white hover:bg-gray-700 rounded-md transition duration-150" onclick="loadContent('kriteria')">
            Data Kriteria
          </a>
                <div>
                    <button id="saw-menu-toggle" class="w-full flex items-center justify-between p-3 text-white hover:bg-gray-700 rounded-md transition duration-150">
                  <span class="flex items-center">
                    <i class="bi bi-bar-chart-line-fill mr-2 text-gray-400"></i>
                    Seleksi Metode SAW
                  </span>
                  <i
                    id="saw-menu-arrow"
                    class="bi bi-chevron-down transition-transform duration-200"
                  ></i>
                </button>

                    <div id="saw-menu-content" class="hidden flex flex-col pl-5">
                        <a href="#" class="p-3 text-white hover:bg-gray-700 rounded-md transition duration-150 flex items-center" onclick="loadContent('penilaian')">
                            <i class="bi bi-check-square-fill mr-2 text-gray-400"></i> Nilai Alternatif
                        </a>
                        <a href="#" class="p-3 text-white hover:bg-gray-700 rounded-md transition duration-150 flex items-center" onclick="loadContent('perhitungan')">
                            <i class="bi bi-check-square-fill mr-2 text-gray-400"></i> Hasil Perhitungan
                        </a>
                    </div>
                </div>
                </nav>
        </div>

        <div id="page-content-wrapper" class="flex-grow min-h-screen">
            <header class="bg-white shadow-md p-4 flex justify-between items-center">
                <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded md:hidden" id="sidebarToggle">
            Menu
          </button>

                <div class="ml-auto relative">
                    <button id="userMenuButton" class="flex items-center space-x-2 text-gray-700 hover:text-gray-900 focus:outline-none">
                  <span id="userNameDisplay">Admin</span>
                  <svg
                    class="w-4 h-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 9l-7 7-7-7"
                    ></path>
                  </svg>
                </button>
                    <div id="userMenuDropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-xl z-20 hidden">
                        <a href="#" id="logoutBtn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Logout</a
                  >
                </div>
              </div>
            </header>

            <main class="p-6">
                <div id="content-container">
                    <h1 class="text-3xl font-bold text-gray-800 mb-4">
                        Selamat Datang!
                    </h1>
                    <p class="text-gray-600">Silakan pilih menu di sidebar.</p>
                </div>
            </main>
        </div>
    </div>

    <div
      id="modal-container"
      class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden p-4"
    ></div>

    <div
      id="toast-container"
      class="fixed top-5 right-5 z-[100] space-y-3"
    >
      </div>


    <script>
        // === Toggle Sidebar ===
        document.getElementById("sidebarToggle").addEventListener("click", () => {
            document.getElementById("wrapper").classList.toggle("toggled");
        });

        // === Toggle Dropdown User ===
        document
            .getElementById("userMenuButton")
            .addEventListener("click", () => {
                const dropdown = document.getElementById("userMenuDropdown");
                dropdown.classList.toggle("hidden");
            });

        // === Toggle Dropdown SAW Menu ===
        document
            .getElementById("saw-menu-toggle")
            .addEventListener("click", () => {
                const content = document.getElementById("saw-menu-content");
                const arrow = document.getElementById("saw-menu-arrow");

                // Tampilkan/sembunyikan submenu
                content.classList.toggle("hidden");

                // Putar panah
                arrow.classList.toggle("rotate-180");
            });

        // Klik di luar dropdown untuk menutup
        window.addEventListener("click", function(e) {
            // Cek jika userMenuButton ada
            const userMenuButton = document.getElementById("userMenuButton");
            if (userMenuButton && !userMenuButton.contains(e.target)) {
                document.getElementById("userMenuDropdown").classList.add("hidden");
            }
        });
    </script>

    <script src="app.js"></script>
</body>
</html>